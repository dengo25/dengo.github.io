import{g as k,a as T,r as o,u as $,j as e,s as v,c as R,b as U,C as E,n as G,d as q,T as F,e as b,f as W,P as H,h as V,i as f,k as Q,l as J,m as K,o as X,p as Y,q as Z,t as ee,v as te,M as se,B as ae,G as M,S as ie,w as N,I as ne}from"./index-DScnxaiB.js";function re(a){return k("MuiCardActions",a)}T("MuiCardActions",["root","spacing"]);const oe=a=>{const{classes:i,disableSpacing:r}=a;return U({root:["root",!r&&"spacing"]},re,i)},le=v("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(a,i)=>{const{ownerState:r}=a;return[i.root,!r.disableSpacing&&i.spacing]}})({display:"flex",alignItems:"center",padding:8,variants:[{props:{disableSpacing:!1},style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),ce=o.forwardRef(function(i,r){const l=$({props:i,name:"MuiCardActions"}),{disableSpacing:c=!1,className:p,...n}=l,d={...l,disableSpacing:c},u=oe(d);return e.jsx(le,{className:R(u.root,p),ownerState:d,ref:r,...n})});function de(a){return k("MuiCardMedia",a)}T("MuiCardMedia",["root","media","img"]);const me=a=>{const{classes:i,isMediaComponent:r,isImageComponent:l}=a;return U({root:["root",r&&"media",l&&"img"]},de,i)},ge=v("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(a,i)=>{const{ownerState:r}=a,{isMediaComponent:l,isImageComponent:c}=r;return[i.root,l&&i.media,c&&i.img]}})({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",variants:[{props:{isMediaComponent:!0},style:{width:"100%"}},{props:{isImageComponent:!0},style:{objectFit:"cover"}}]}),ue=["video","audio","picture","iframe","img"],pe=["picture","img"],he=o.forwardRef(function(i,r){const l=$({props:i,name:"MuiCardMedia"}),{children:c,className:p,component:n="div",image:d,src:u,style:A,...h}=l,C=ue.includes(n),x=!C&&d?{backgroundImage:`url("${d}")`,...A}:A,g={...l,component:n,isMediaComponent:C,isImageComponent:pe.includes(n)},S=me(g);return e.jsx(ge,{className:R(S.root,p),as:n,role:!C&&d?"img":void 0,ref:r,style:x,ownerState:g,src:C?d||u:void 0,...h,children:c})}),L=({items:a,width:i,height:r,type:l,onItemClick:c})=>{const p=(n,d)=>{c&&c(l,n.no||n.id,n,d)};return e.jsx(e.Fragment,{children:a.map((n,d)=>e.jsxs(E,{sx:{minWidth:345},className:"card-basic",children:[e.jsx(he,{sx:{width:300,height:300},image:n.img?`${n.img}?w=248&fit=crop&auto=format`:G,title:n.title}),e.jsxs(q,{children:[e.jsx(F,{gutterBottom:!0,variant:"h5",component:"div",children:n.title}),e.jsx("div",{dangerouslySetInnerHTML:{__html:b(n.content)},className:"custom-body"})]}),e.jsx(ce,{children:e.jsx(W,{type:"button",size:"medium",variant:"contained",color:"success",text:"더보기",onClick:()=>p(n,d)})})]},d))})},xe=()=>{const a=v(H)(({theme:s})=>({backgroundColor:"#fff",...s.typography.body2,padding:s.spacing(1),textAlign:"center",color:(s.vars??s).palette.text.secondary,...s.applyStyles("dark",{backgroundColor:"#1A2027"})})),i=V(s=>s.member),[r,l]=o.useState(f("notice").slice(0,3)),[c,p]=o.useState(f("notice").slice(0,3)),[n,d]=o.useState(f("notice").slice(0,10)),[u,A]=o.useState(f("notice").slice(0,5)),[h,C]=o.useState(f("notice").slice(0,5)),x=Q();o.useEffect(()=>{console.log("현재 로그인 상태:",i),J().then(s=>{}),K().then(s=>{}),X().then(s=>{}),Y().then(s=>{}),Z().then(s=>{})},[i]);const g=async(s,t)=>{s=="notice"?x(`/notice/${t}`):s=="review"?x(`/review/detail/${t}?page=1&size=10`):s=="faq"&&x("/faq"),console.log(`${s}! -->>>> `,`/review/detail/${t}?page=1&size=10`)},S=o.useMemo(()=>Array.isArray(r)?r.map(s=>({...s,plain:b(s.noticeContent)})):[],[r]),D=o.useMemo(()=>Array.isArray(n)?n.filter(s=>s.images&&s.images.length>0).sort((s,t)=>new Date(t.createdAt)-new Date(s.createdAt)).map(s=>({tno:s.tno||s.id,reviewTitle:s.title,images:s.images||[],author:s.memberId||"익명",content:s.content||""})):[],[n]),O=o.useMemo(()=>Array.isArray(u)?u.sort((t,m)=>new Date(m.createdAt)-new Date(t.createdAt)).map(t=>({no:t.tno,img:t.images&&t.images.length>0?t.images[0].fileUrl:null,title:t.title,author:t.memberId,content:t.content})):[],[u]),P=o.useMemo(()=>Array.isArray(h)?h.sort((t,m)=>new Date(m.createdAt)-new Date(t.createdAt)).map(t=>({no:t.tno,img:t.images&&t.images.length>0?t.images[0].fileUrl:null,title:t.title,author:t.memberId,content:t.content})):[],[h]),B=o.useMemo(()=>Array.isArray(c)?c.sort((t,m)=>new Date(m.createdAt)-new Date(t.createdAt)).map(t=>({no:t.tno,img:t.images&&t.images.length>0?t.images[0].fileUrl:null,title:t.title,author:t.memberId,content:t.content})):[],[c]);o.useMemo(()=>Array.isArray(r)?r.sort((t,m)=>new Date(m.notice_create_date)-new Date(t.notice_create_date)).map(t=>({no:t.noticeNo,img:t.imageUrls&&t.imageUrls.length>0?t.imageUrls[0]:null,title:t.noticeTitle,content:b(t.noticeContent)})):[],[r]);const z=o.useCallback(({tno:s,reviewTitle:t,images:m,content:I},w)=>e.jsxs("div",{className:"slide-box",children:[e.jsx("div",{className:"slide-img",children:m&&m.length>0&&e.jsx("p",{children:m.map((y,j)=>e.jsx("img",{src:y.fileUrl,alt:`review-${s}-img-${j}`},`${s}-img-${j}`))})}),e.jsx("p",{className:"text",children:e.jsxs("a",{onClick:()=>g("review",s),children:[e.jsx("span",{children:t}),b(I)]})})]},s||`slide-${w}`),[]),_=o.useCallback(({noticeNo:s,noticeTitle:t,imageUrls:m,plain:I},w)=>e.jsx("ul",{children:e.jsx("li",{children:e.jsx("a",{onClick:()=>g("notice",s),children:(m||[]).map((y,j)=>e.jsx("img",{src:y,alt:`revive-${s}-img-${j}`},y??j))})})},s||`slide-${w}`),[]);return e.jsx(ee,{theme:te,children:e.jsx(se,{maxWidth:"xl",children:e.jsx(ae,{sx:{flexGrow:1},children:e.jsxs(M,{container:!0,spacing:2,children:[e.jsx(M,{size:12,children:e.jsx(a,{children:e.jsxs("p",{className:"welcome-ment",children:["👋👋 환영합니다, ",(i==null?void 0:i.memberName)||"방문자","님!"]})})}),e.jsx(M,{size:8,children:e.jsxs(ie,{spacing:2,children:[e.jsxs(a,{children:[e.jsx("h3",{className:"main-title",children:"📝 SOBI 최신 리뷰"}),e.jsx(N,{slides:D,renderSlide:z,scrollbar:{draggable:!0},autoplay:{delay:5e3,disableOnInteraction:!1},loop:!0,enableLazyLoading:!0,slidesPerView:1,slidesPerGroup:1,className:"review-trand"})]}),e.jsxs(a,{children:[e.jsx("h3",{className:"main-title",children:"📝 SOBI 카테고리별 1"}),e.jsx(L,{items:O,type:"review",onItemClick:g})]}),e.jsxs(a,{children:[e.jsx("h3",{className:"main-title",children:"📝 SOBI 카테고리별 2"}),e.jsx(L,{items:P,type:"review",onItemClick:g})]}),e.jsxs(a,{children:[e.jsx("h3",{className:"main-title",children:"📢 SOBI 공지사항"}),e.jsx(N,{slides:S,renderSlide:_,scrollbar:{draggable:!0},autoplay:{delay:8e3,disableOnInteraction:!1},loop:!0,enableLazyLoading:!0,slidesPerView:2,spaceBetween:15,slidesPerGroup:1,className:"notice-swiper"})]}),e.jsx(a,{children:e.jsx("h3",{className:"main-title",children:e.jsx("a",{href:"#",onClick:()=>{g("faq")},className:"",children:"📢 SOBI FAQ 바로가기"})})})]})}),e.jsx(M,{size:4,children:e.jsxs(a,{children:[e.jsx("h3",{className:"main-title",children:"📝 SOBI 리뷰"}),e.jsx(ne,{items:B,cols:1,gap:10,type:"review",onItemClick:g})]})})]})})})})};export{xe as default};
